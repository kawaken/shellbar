# ビルトインコマンド仕様

## 概要

ビルトインコマンドは、アプリケーションに組み込まれた基本的なコマンド群です。設定ファイルなしでも動作し、外部コマンド呼び出しのオーバーヘッドがありません。

## 設計方針

### 基本原則

- **設定不要**: commands セクションでの設定は不要、フォーマットで直接指定
- **高パフォーマンス**: Go ライブラリで実装、外部コマンド呼び出しなし
- **固定フォーマット**: MVP 対応として、出力フォーマットは固定

### 実装方式

- `NewBuiltinCommand(name string)`で生成
- 内部で Go ライブラリを使用
- エラーハンドリングは Go 標準に準拠

## ビルトインコマンド一覧

### 1. path

- **説明**: 現在のディレクトリの絶対パス
- **フォーマット**: `$HOME`相当は`~`で表示
- **実装**: `os.Getwd()` + `os.UserHomeDir()`
- **内部設定**: interval=5s, timeout=1s
- **例**:
  - `/home/user/projects/app` → `~/projects/app`
  - `/var/log` → `/var/log`

### 2. date

- **説明**: 現在の日付
- **フォーマット**: `YYYY-MM-DD`
- **実装**: `time.Now().Format("2006-01-02")`
- **内部設定**: interval=5s, timeout=1s
- **例**: `2024-07-08`

### 3. time

- **説明**: 現在の時刻
- **フォーマット**: `HH:MM:SS`
- **実装**: `time.Now().Format("15:04:05")`
- **内部設定**: interval=1s, timeout=1s
- **例**: `15:30:45`

### 4. git_branch

- **説明**: 現在の Git ブランチ名
- **フォーマット**: ブランチ名のみ
- **実装**: `go-git`ライブラリ
- **内部設定**: interval=5s, timeout=1s
- **例**: `main`, `feature/login`
- **エラー時**: 空文字 or エラーメッセージ

## 使用方法

### フォーマット指定

```toml
# 設定ファイルでの使用
format = "{path} {git_branch} | {date} {time}"

# commandsセクションでの定義は不要
```

### 設定なし動作

```toml
# デフォルト設定
format = "{path} {git_branch} | {date} {time}"
```

## エラーハンドリング

ビルトインコマンドのエラーハンドリングについては、[エラーハンドリング設計](./04-error-handling.md)を参照してください。

## 将来の拡張予定

### Phase 2 以降で対応予定

- フォーマット指定の柔軟化
- 追加のビルトインコマンド
- 設定可能なパラメータ
