# ビルトインコマンド仕様

## 概要

ビルトインコマンドは、アプリケーションに組み込まれた基本的なコマンド群です。設定ファイルなしでも動作し、外部コマンド呼び出しのオーバーヘッドがありません。

## 設計方針

### 基本原則
- **設定不要**: commandsセクションでの設定は不要、フォーマットで直接指定
- **高パフォーマンス**: Goライブラリで実装、外部コマンド呼び出しなし
- **固定フォーマット**: MVP対応として、出力フォーマットは固定

### 実装方式
- `NewBuiltinCommand(name string)`で生成
- 内部でGoライブラリを使用
- エラーハンドリングはGo標準に準拠

## ビルトインコマンド一覧

### 1. path
- **説明**: 現在のディレクトリの絶対パス
- **フォーマット**: `$HOME`相当は`~`で表示
- **実装**: `os.Getwd()` + `os.UserHomeDir()`
- **例**: 
  - `/home/user/projects/app` → `~/projects/app`
  - `/var/log` → `/var/log`

### 2. date
- **説明**: 現在の日付
- **フォーマット**: `YYYY-MM-DD`
- **実装**: `time.Now().Format("2006-01-02")`
- **例**: `2024-07-08`

### 3. time
- **説明**: 現在の時刻
- **フォーマット**: `HH:MM:SS`
- **実装**: `time.Now().Format("15:04:05")`
- **例**: `15:30:45`

### 4. git_branch
- **説明**: 現在のGitブランチ名
- **フォーマット**: ブランチ名のみ
- **実装**: `go-git`ライブラリ
- **例**: `main`, `feature/login`
- **エラー時**: 空文字 or エラーメッセージ

## 使用方法

### フォーマット指定
```toml
# 設定ファイルでの使用
format = "{path} {git_branch} | {date} {time}"

# commandsセクションでの定義は不要
```

### 設定なし動作
```toml
# デフォルト設定
format = "{path} {git_branch} | {date} {time}"
```

## エラーハンドリング

### Git関連エラー
- Gitリポジトリ外: 空文字を返す
- `.git`ディレクトリ破損: エラーメッセージを返す

### パス関連エラー
- 権限エラー: 可能な範囲での表示
- 存在しないディレクトリ: エラーメッセージを返す

## 将来の拡張予定

### Phase 2以降で対応予定
- フォーマット指定の柔軟化
- 追加のビルトインコマンド
- 設定可能なパラメータ