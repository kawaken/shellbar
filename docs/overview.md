# Shellbar - プロジェクト概要

## プロダクト概要

- **名前**: Shellbar
- **CLIコマンド**: `sbar`
- **目的**: 長時間実行プロセス中でも、普段のzshプロンプト情報を常時確認可能にする

## コア価値

```bash
# 普段見えてる情報（claude code実行前）
~/projects/myapp main +2 ~1 | 15:30:45

# claude code実行中は見えない
> Working on implementing login feature...
> Creating authentication service...

# Shellbar使用時
┌─────────────────────────────────────────────────────────────┐
│ > Working on implementing login feature...                  │
│ > Creating authentication service...                        │
│ > █                                                         │
├─────────────────────────────────────────────────────────────┤
│ ~/p/myapp main +2 ~1 | 15:30:45                             │
└─────────────────────────────────────────────────────────────┘
```

## 必須機能

### 1. プロセスラッピング

- 基本実行: `sbar <command> [args...]`
- 子プロセスをPTYで制御
- キー入力の透過的な転送

### 2. ステータスバー表示

- 画面最下部1行に表示
- 設定可能なフォーマット文字列
- 定期的な更新（各コマンドごとに異なる間隔）

### 3. 設定システム

- TOML形式の設定ファイル
- 複数の設定ファイル検索パス
- コマンドライン引数での設定上書き

## 技術仕様

### 画面制御

1. ターミナルサイズ取得（width, height）
2. 子プロセス用pty作成（height-1行）
3. 最下行にステータス描画
4. Raw modeでキー入力転送

### データ管理

- 各コマンドを個別goroutineで定期実行
- 結果をメモリキャッシュに保存
- フォーマット文字列を展開して描画

## MVPスコープ

### 実装する機能

- ✅ 基本プロセスラッピング
- ✅ 1行ステータスバー表示
- ✅ TOML設定ファイル
- ✅ 外部コマンド実行
- ✅ 個別更新間隔
- ✅ 基本エラーハンドリング

### 実装しない機能（将来対応）

- ❌ 複数行ステータスバー
- ❌ 色・スタイル設定
- ❌ ウィンドウリサイズ対応
- ❌ セッション管理

## 成功基準

### 機能面

- claude code実行中にGit情報が見える
- パス情報が常時表示される
- 元プロセスの動作に影響しない
- キー入力遅延なし

### 品質面

- 起動時間1秒未満
- メモリ使用量10MB未満
- CPU使用率アイドル時1%未満
